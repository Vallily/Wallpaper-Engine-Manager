# 更新日志

所有此项目的显著更改将记录在此文件中。

## [4.1.0] - 2025-07-14

### ✨ 新增 (Added)
*   **文件重命名**: 在“清理ZIP文件”等功能调用的文件浏览器中，现在可以通过右键单击文件来直接重命名。

*   **设置页面重构**:
    *   新增 **“常用工具”** 设置面板，用于集中配置外部工具（如 Bandizip、Cheat Engine）的路径。
*   **解压功能修复**:
    *   现在针对分卷压缩包会正常删除同目录下的其他分卷。

### 🚀 优化 (Changed)
*   **“定位可执行文件”修复**: 该功能现在同时支持选择 `.exe` 和 `.bat` 文件作为应用壁纸的启动程序。现在可以将MTool生成的“用工具启动”bat设为启动入口了


## [4.0.8] - 2025-07-13

### ✨ 新增 (Added)
*   **右键菜单图标**: 为右键菜单中的所有选项增加了清晰、统一的SVG图标，提高了选项的可识别性。

### 🚀 优化 (Changed)
*   **UI全面美化**: 对整个应用的视觉风格进行了现代化重构，包括但不限于：
    *   **布局与间距**: 调整了全局边距和填充，优化了侧边栏、头部和主内容区的布局，使信息层级更清晰。
    *   **视觉风格**: 统一并柔化了边框圆角和阴影效果，采用了更现代的配色方案。
    *   **交互元素**: 美化了按钮、输入框、复选框和滚动条的样式，提升了交互体验。
    *   **动画效果**: 为按钮、菜单项等交互元素增加了平滑的过渡动画。
*   **右键菜单体验**:
    *   **智能定位**: 优化了右键菜单的弹出逻辑，确保其始终完整地显示在屏幕可视区域内，避免被边缘遮挡。
    *   **视觉增强**: 重新设计了右键菜单的样式，增加了项目间的分隔线和危险操作的警示色。
*   **设置页面**: 优化了设置页面的布局，使其在不同窗口尺寸下表现更佳。
*   **代码结构**: 移除了 `style-beautify.css` 并将所有美化样式整合进主 `style.css`，简化了文件结构。

## [4.0.7] - 2025-07-12

### 🚀 优化 (Changed)
*   **CSS重构与解耦**:
    *   将本地文件浏览器 (`LocalFileBrowser`) 的相关样式从主 `style.css` 文件中分离到独立的 `components/css/LocalFileBrowser.css`，提高了模块化和可维护性。
    *   将搜索功能 (`Search`) 的相关样式从主 `style.css` 文件中分离到独立的 `components/css/Search.css`，进一步清晰化了组件结构。
    *   生成了一份详细的 `style-report.md`，用于全面审查和记录现有样式及其在代码中的应用，为未来的样式优化和重构提供了坚实的数据基础。

## [4.0.6] - 2025-07-12

### ✨ 新增 (Added)
*   **(实验性) 清理ZIP文件**: 在壁纸项目的右键菜单中增加了一项新功能，允许用户调用文件浏览器，选择并安全地将指定的压缩文件（`.zip`, `.rar`, `.7z`, 分卷等）移动到回收站。

### 🚀 优化 (Changed)
*   **UI优化**: 为所有标记为“(实验性)”的右键菜单项添加了更醒目的背景色和悬停动画效果，提高了功能的辨识度和用户体验。

## [4.0.5] - 2025-07-12

### 🚀 优化 (Changed)
*   **重构本地文件浏览器**:
    *   对 `LocalFileBrowser` 组件进行了全面的代码重构和样式优化。
    *   修复了当文件列表过长时，滚动条无法正常出现的问题。
    *   文件浏览器的尺寸现在会自适应主窗口大小，提供更佳的响应式布局。
    *   改进了文件和文件夹的排序逻辑，确保文件夹始终位于顶部，目标文件类型（如 `.json`）次之。
    *   为可选择的目标文件（如 `project.json`）添加了醒目的高亮样式，便于用户快速定位。


格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循[语义化版本](https://semver.org/spec/v2.0.0.html)。


## [4.0.4] - 2025-07-12

### 🚀 优化 (Changed)
*   **统一右键菜单行为**: 移除了所有对右键菜单的禁用逻辑，确保在任何视图模式（包括VFS禁用和自定义路径）下，都能访问“打开所在位置”和“删除”等所有功能选项。
*   **解除删除限制**: 完全移除了在“自定义路径”模式下对删除操作的限制。现在所有删除操作都会将文件安全地移至回收站，无论使用何种路径设置。

<details>
<summary><strong>过往版本</strong></summary>

## [4.0.3] - 2025-07-12

### ✨ 新增 (Added)
*   **壁纸实时搜索**:
    *   在主界面右上角新增了一个搜索图标，点击后可激活搜索模式。
    *   采用“有序子序列匹配”算法，支持模糊、乱序、跳字搜索（例如，搜索“魔女”可以匹配到“魔女之旅”）。
    *   搜索结果实时更新，帮助用户快速从大量壁纸中筛选出目标项目。

## [4.0.2] - 2025-07-11

### ✨ 新增 (Added)
*   **禁用虚拟文件系统 (VFS)**:
    *   在“设置-常规设置”中，新增了一个“关闭vfs（虚拟文件夹）功能”的复选框。
    *   勾选后，主页将以扁平列表的形式展示所有壁纸，忽略虚拟文件夹结构，提供一个纯粹的壁纸浏览视图。

## [4.0.1] - 2025-07-11

### 🚀 优化 (Changed)

*   **代码重构**:
    *   将主页面的UI组件（如 `WallpaperGrid` 和 `WallpaperList`）从 `renderer.js` 分离到独立的 `components/mainPage.js` 文件中，实现了视图与逻辑的进一步解耦，提高了代码的可读性和可维护性。
*   **语言修正**:
    *   修正了 `CHANGELOG.md` 中的部分英文描述，统一为中文。

## [4.0.0] - 2025-07-11

这是一个里程碑式的版本，我们对应用的核心架构进行了彻底的重构，并引入了多项期待已久的新功能。v4.0.0 专注于提升应用的性能、可扩展性和用户体验。

### ✨ 新增 (Added)

*   **虚拟文件系统 (VFS)**:
    *   现在您可以在应用内创建、重命名和删除“虚拟文件夹”，自由组织您的壁纸库，而无需移动物理文件。
    *   支持将壁纸和虚拟文件夹拖拽到其他虚拟文件夹中，实现灵活的分类管理。
*   **自定义壁纸库路径**:
    *   在设置中，您可以将壁纸库指向任意本地或网络路径，方便您管理位于不同磁盘或NAS上的壁纸。
    *   为保障数据安全，当使用自定义路径时，将自动禁用物理删除功能。
*   **（实验性）压缩包解压**:
    *   在“调试”设置中启用后，可直接在应用内解压 `.zip`, `.rar`, `.7z` 等压缩文件（需预先配置 Bandizip 路径）。
    *   支持输入密码解压加密压缩包，并可选择解压后将源文件移至回收站。
*   **壁纸健康检查**:
    *   新增工具，用于扫描并报告壁纸库中可能存在问题的项目（如缺少 `project.json` 文件），便于快速定位和修复。
*   **常用密码管理器**:
    *   在解压加密文件时，应用会自动保存最近使用过的5个密码，方便您快速调用，无需重复输入。

### 🚀 优化 (Changed)

*   **核心架构重构**:
    *   重写了壁纸扫描、缓存和数据管理的核心逻辑，显著提升了应用启动速度和刷新效率。
    *   引入了全局缓存机制，大幅减少了不必要的磁盘I/O操作，降低了系统资源占用。
    *   代码结构全面模块化，例如将实验性功能、路径管理等逻辑解耦为独立模块，提高了代码的可维护性和扩展性。
*   **性能提升**:
    *   优化了文件夹大小的计算逻辑，通过缓存机制避免了重复计算，界面加载更迅速。
    *   壁纸刷新操作现在基于文件修改时间（mtime）进行增量更新，而不是每次都完全扫描。
*   **用户体验 (UX)**:
    *   为所有危险操作（如删除）增加了二次确认对话框，防止误操作。
    *   改进了大量操作的视觉反馈和错误提示信息，使应用状态更清晰。

### 🐛 修复 (Fixed)

*   修复了在特定情况下，应用壁纸（Application类型）的启动路径可能保存不正确的问题。
*   修复了当 `wallpapers_db.json` 文件为空或损坏时，可能导致应用启动失败的问题，现在会自动重建为初始状态。

</details>
